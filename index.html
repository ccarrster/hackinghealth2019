<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Community</title>
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="js/typeahead.bundle.js"></script>
    <style>
    	.tt-menu{
    		background-color: #fff;
    		border: 1px solid black;
    	}
    	.tt-suggestion:hover {
			color: #fff;
			background-color: blue;
    	}
    	.tt-input{
    		width: 200px;
    	}
    	.tt-menu{
    		width: 200px;
    	}
    	.result{
    		border: 1px solid black;
    	}
    	.event{
			border: 1px solid black;
    	}
      #results img{
        max-width: 100px;
        max-height: 200px;
        
      }
    </style>
    <script>
    var groups = [];
    var group = {
      name: 'Art for art\'s sake',
      address: '25 Regina St. S Waterloo On N2J 1R8 1R8',
      phone: '519-886-4577',
      tags: ['Art', 'Learning'],
      info: 'Come and join Art for Art\'s Sake! This is a drop in program where you discover, learn and play with art',
      image: 'artssake.jpg',
      events: ['May 10, 25, June 7, 21 10:30 am - 12:30 pm'],
      cost: '$5'
  };
  groups.push(group);
  var group = {
      name: 'Down the garden path',
      address: 'St. Andrew\'s Presbyterian Church Queen at Weber, downtown Kitchener',
      phone: '',
      tags: ['Music Listening', 'Park'],
      info: 'Low cost lunches from 11:30 Music 12:15-12:45 pm',
      image: 'churchconcerts.jpg',
      events: ['June 5 Debra Lacoste trumpet and Anne-Marie McDairmid']
  };
  groups.push(group);
  var group = {
      name: 'Playground Festival of New Work',
      address: '122 Frederic St. Kitchener',
      phone: '',
      tags: ['Written Work'],
      info: 'Outdoor swimming pool',
      image: '20190601_220706.jpg',
      events: ['June 6 7:30', 'June 7 7:30', 'June 8 2:00', 'June 8 7:30']
  };
  var group = {
      name: 'Sierra',
      address: 'jasonsierra72@gmail.com',
      phone: '',
      tags: ['Band', 'Prog Rock'],
      info: 'Need a drummer.',
      image: 'drummer.jpg',
      events: {}
  };
  groups.push(group);

    </script>
  </head>
  <body>
	<div class="container">
    <h1>Community</h1>
    <img src="hi.png">
    <div>
		<div>View validated groups</div>
		<div id="prefetch">
		  <input class="typeahead" type="text" placeholder="Keyword">
		  <button type="button" class="btn btn-primary" onclick="search()">Search</button>
		</div>
		<div id="results"></div>
		<script>
		function search(){
			$('#results').html("");
      for(groupkey in groups){
        var group = groups[groupkey];
        var tagstring = "";
        for(tagkey in group.tags){
          var tag = group.tags[tagkey];
          var sepstring = ", ";
          if(tagstring == ""){
            sepstring = "";
          }
          tagstring += sepstring + tag;
        }
        if(group.image == ''){
          imagestring = '';
        } else {
          imagestring = '<a href="'+group.image+'"><img src="'+group.image+'"></a>';
        }
        $('#results').append('<div class="result"><div>'+group.name+'</div><div>'+group.address+'</div><div>'+group.phone+'</div><div>'+group.info+'</div><div>'+tagstring+'</div><div>'+imagestring+'</div><div><button type="button" class="btn btn-primary" onclick="details('+groupkey+')">Details</button></div></div>');

      }
		
		}
		function details(groupkey){
			$('#results').html("");

        var group = groups[groupkey];
        var tagstring = "";
        for(tagkey in group.tags){
          var tag = group.tags[tagkey];
          var sepstring = ", ";
          if(tagstring == ""){
            sepstring = "";
          }
          tagstring += sepstring + tag;
        }
        if(group.image == ''){
          imagestring = '';
        } else {
          imagestring = '<a href="'+group.image+'"><img src="'+group.image+'"></a>';
        }
        $('#results').append('<div class="result"><div>'+group.name+'</div><div>'+group.address+'</div><div>'+group.phone+'</div><div>'+group.info+'</div><div>'+tagstring+'</div><div>'+imagestring+'</div><div><button type="button" class="btn btn-primary" onclick="details(1)">Details</button></div></div>');

      
		}
		function validate(){
			$('#results').html("");
      for(groupkey in groups){
        var group = groups[groupkey];
        var tagstring = "";
        for(tagkey in group.tags){
          var tag = group.tags[tagkey];
          var sepstring = ", ";
          if(tagstring == ""){
            sepstring = "";
          }
          tagstring += sepstring + tag;
        }
        if(group.image == ''){
          imagestring = '';
        } else {
          imagestring = '<a href="'+group.image+'"><img src="'+group.image+'"></a>';
        }
        $('#results').append('<div class="result"><div>'+group.name+'</div><div>'+group.address+'</div><div>'+group.phone+'</div><div>'+group.info+'</div><div>'+tagstring+'</div><div>'+imagestring+'</div><div><button type="button" class="btn btn-primary" onclick="details('+groupkey+')">Details</button></div></div>');

      }
		}
		function add(groupid){
			$('#results').html("");
			$('#results').append('<div class="result"><div>Name <input type="text"></div><div><div>Subjects <input type="text"></div></div><div><div>Location <input type="text"></div></div><div><div>Contact <input type="text"></div></div><div><div>Cost <input type="text"></div></div><div>Add Events</div><div class="event"><div>Date <input type="text"></div><div>Start Time <input type="text"></div><div>End Time <input type="text"></div><div>Location <input type="text"></div><div>Cost <input type="text"></div><div>Details <input type="text"></div><div></div>');
		}
		$(function() {
			var countries = new Bloodhound({
			  datumTokenizer: Bloodhound.tokenizers.whitespace,
			  queryTokenizer: Bloodhound.tokenizers.whitespace,
			  // url points to a json file that contains an array of country names, see
			  // https://github.com/twitter/typeahead.js/blob/gh-pages/data/countries.json
			  prefetch: 'data/hobbies.json'
			});

			// passing in `null` for the `options` arguments will result in the default
			// options being used
			$('#prefetch .typeahead').typeahead(null, {
			  name: 'countries',
			  source: countries
			});
		});
	</script>
    </div>
    <div>
    	<button type="button" class="btn btn-primary" onclick="add()">Add Group</button>
    </div>
    <div>
	    <button type="button" class="btn btn-primary" onclick="validate()">Validate Groups</button>
    </div>
    <p style="font-size: 0.9rem;font-style: italic;"><a href="https://www.behance.net/gallery/28235335/DAB-Radio">"DAB+ Radio"</a><span> by <span>warren willmott</span></span> is licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0/?ref=ccsearch&atype=html" style="margin-right: 5px;">CC BY-NC 4.0</a><a href="https://creativecommons.org/licenses/by-nc/4.0/?ref=ccsearch&atype=html" target="_blank" rel="noopener noreferrer" style="display: inline-block;white-space: none;opacity: .7;margin-top: 2px;margin-left: 3px;height: 22px !important;"><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-by_icon.svg" /><img style="height: inherit;margin-right: 3px;display: inline-block;" src="https://search.creativecommons.org/static/img/cc-nc_icon.svg" /></a></p>
    </div>

  </body>
</html>